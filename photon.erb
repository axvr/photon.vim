<%
    # RNB, A VIM COLORSCHEME TEMPLATE
    # Author:        Romain Lafourcade (https://github.com/romainl)
    # Canonical URL: https://gist.github.com/romainl/5cd2f4ec222805f49eca

    # NOTE: Ruby is needed to generate this colorscheme.

    # Step 1: information
    #
    # Make sure the name of your colorscheme is unique and attractive.
    # The description should fit in a single line with no linefeed.
    # 'background' can be "light" or "dark".

    information = {
        author:      "Alex Vear",
        email:       "av@axvr.io",
        name:        "photon",
        description: "A minimal and elegant dark colour scheme for Vim.",
        background:  "dark",
        webpage:     "https://github.com/axvr/photon.vim",
        licence:     "MIT (2019)"
    }

    # Step 2: colors
    #
    # black = [       give each color a distinctive name
    #   "#000000",    hexadecimal color for GVim/MacVim and "true colors" terminals
    #   0,            integer between 0 and 255 for terminals supporting 256 colors
    #   "black"       color name for less capable color terminals, can be "darkred", "red",
    #                 "darkgreen", "green", "darkyellow", "yellow", "darkblue", "blue",
    #                 "darkmagenta", "magenta", "black", "darkgrey", "grey", "white"
    # ]
    #
    # If your colors are defined correctly, the resulting colorscheme is guaranteed
    # to work in GVim (Windows/Linux), MacVim, and any properly set up terminal emulator.

    # Background
    bg = ["#262626", 235, "black"]

    # Darker background shades
    bgd_1 = ["#1c1c1c", 234, "black"]
    bgd_2 = ["#121212", 233, "black"]

    # Lighter background shades
    bgl_1 = ["#303030", 236, "darkgray"]
    bgl_2 = ["#3a3a3a", 237, "darkgray"]
    bgl_3 = ["#444444", 238, "darkgray"]
    bgl_4 = ["#626262", 241, "darkgray"]

    # Foreground
    fg = ["#c6c6c6", 251, "white"]

    # Accents
    purple = ["#af87d7", 140, "darkmagenta"]
    orange = ["#d75f5f", 167, "red"]
    grey = ["#767676", 243, "darkgray"]

    yellow = ["#af8700", 136, "darkyellow"]
    green = ["#87af87", 108, "darkgreen"]
    blue = ["#5f87ff", 68, "blue"] # TODO improve this colour
    red = ["#af5f87", 132, "darkred"] # TODO make brighter?

    # Step 3: highlights
    #
    # You can define highlight groups like this:
    #
    #   [ "Normal",       name of the highlight group
    #     white,          the color used for background color, or use "NONE", "fg" or "bg"
    #     darkgray,       the color used for foreground color, or use "NONE", "fg" or "bg"
    #     "NONE"          style, can be "bold", "underline", "reverse", "italic",
    #                     "standout", "NONE" or "undercurl"
    #   ]
    #
    # The sample above tells Vim to render normal text in dark gray against a white
    # background, without any styling.
    #
    # or link an highlight group to another:
    #
    #   [ "Title", "Normal" ]
    #
    # In GUI Vim, there is an additional color for the undercurl used to
    # highlight spelling mistakes:
    #
    #   [ "SpellBad",     name of the highlight group
    #     "NONE",         the color used for background color, or use "NONE", "fg" or "bg"
    #     red,            the color used for foreground color, or use "NONE", "fg" or "bg"
    #     "undercurl",    style
    #     red             color used for the undercurl
    #   ]
    #
    # The sample above tells Vim to render badly spelled words in red against the current
    # background, with a red undercurl.

    highlights = [
        [ "Normal", bg, fg, "NONE" ],
        [ "NonText", "bg", bgl_3, "NONE" ],
        [ "Comment", "bg", bgl_4, "NONE" ],
        [ "Conceal", "bg", bgl_4, "NONE" ],

        [ "Constant", "bg", purple, "NONE" ],
        [ "Character", "Constant" ],
        [ "Number", "Constant" ],
        [ "Float", "Number" ],
        [ "Boolean", "Constant" ],
        [ "String", "Constant" ],

        [ "Identifier", "bg", fg, "NONE" ],
        [ "Function", "Identifier" ],

        [ "Statement", "bg", grey, "NONE" ],
        [ "Conditonal", "Statement" ],
        [ "Repeat", "Statement" ],
        [ "Label", "Statement" ],
        [ "Keyword", "Statement" ],
        [ "Exception", "Statement" ],

        [ "Operator", "bg", fg, "bold" ],

        [ "PreProc", "bg", grey, "NONE" ],
        [ "Include", "PreProc" ],
        [ "Define", "PreProc" ],
        [ "Macro", "PreProc" ],
        [ "PreCondit", "PreProc" ],

        [ "Type", "bg", fg, "NONE" ],
        [ "StorageClass", "Type" ],
        [ "Structure", "Type" ],
        [ "Typedef", "Type" ],

        [ "Special", "NONE", grey, "NONE" ],
        [ "SpecialChar", "Special" ],
        [ "Tag", "Special" ],
        [ "Delimiter", "Special" ],
        [ "SpecialComment", "Special" ],
        [ "Debug", "Special" ],

        [ "Error", "NONE", red, "NONE" ],
        [ "ErrorMsg", "Error" ],
        [ "Warning", "NONE", yellow, "NONE" ],
        [ "WarningMsg", "Warning" ],

        [ "ModeMsg", "NONE", grey, "NONE" ],
        [ "MoreMsg", "ModeMsg" ],
        [ "Question", "ModeMsg" ],

        [ "Ignore", "NonText" ],
        [ "Todo", "NONE", orange, "bold" ],
        [ "Underlined", "NONE", fg, "underline" ],

        [ "StatusLine", bgl_2, purple, "NONE" ],
        [ "StatusLineNC", bgl_1, grey, "NONE" ],
        [ "StatusLineTerm", "StatusLine" ],
        [ "StatusLineTermNC", "StatusLineNC" ],
        [ "TabLine", "StatusLineNC" ],
        [ "TabLineFill", "StatusLineNC" ],
        [ "TabLineSel", "StatusLine" ],
        [ "WildMenu", bgl_1, orange, "NONE" ],
        [ "VertSplit", bgl_1, bgl_1, "NONE" ],

        [ "Title", "NONE", grey, "bold" ],

        [ "LineNr", "NONE", bgl_4, "NONE" ],
        [ "CursorLineNr", bgl_1, purple, "NONE" ],
        [ "Cursor", purple, fg, "NONE" ],
        [ "CursorLine", bgl_1, "NONE", "NONE" ],
        [ "CursorColumn", "CursorLine" ],
        [ "ColorColumn", bgd_1, "NONE", "NONE" ],
        [ "SignColumn", "NONE", grey, "NONE" ],

        [ "helpHyperTextJump", "bg", purple, "NONE" ],

        [ "Visual", bgl_2, "NONE", "NONE" ],
        [ "VisualNOS", bgl_3, "NONE", "NONE" ],

        [ "Pmenu", bgl_2, "NONE", "NONE" ],
        [ "PmenuSbar", bgl_1, "NONE", "NONE" ],
        [ "PmenuSel", bgl_1, purple, "NONE" ],
        [ "PmenuThumb", orange, "NONE", "NONE" ],

        [ "FoldColumn", "NONE", bgl_4, "NONE" ],
        [ "Folded", bgd_1, grey, "NONE" ],

        [ "SpecialKey", "NONE", grey, "NONE" ],
        [ "IncSearch", orange, bg, "NONE" ],
        [ "Search", purple, bg, "NONE" ],
        [ "Directory", "NONE", purple, "NONE" ],
        [ "MatchParen", "NONE", orange, "bold" ],

        # TODO improve the colours used here
        [ "SpellBad", "NONE", red, "underline" ],
        [ "SpellCap", "NONE", green, "underline" ],
        [ "SpellLocal", "NONE", blue, "underline" ],
        [ "SpellRare", "NONE", yellow, "underline" ],

        [ "QuickFixLine", bgd_1, "NONE", "NONE" ],

        # TODO improve the colours used here
        [ "DiffAdd", "NONE", green, "NONE" ],
        [ "DiffChange", "NONE", yellow, "NONE" ],
        [ "DiffDelete", "NONE", red, "NONE" ],
        [ "DiffText", "NONE", orange, "NONE" ],
        [ "diffAdded", "DiffAdd" ],
        [ "diffRemoved", "DiffDelete" ]

        # TODO improve colours for markdown, and org files
    ]

    # Define the color palette used by :terminal when in GUI Vim
    # or in TUI Vim when 'termguicolors' is enabled. If this list
    # is empty or if it doesn't contain exactly 16 items, the corresponding
    # Vim variable won't be set.
    #
    # The expected values are colors defined in step 2.
    #
    # TODO: move these colours into variables and share them with the rest of photon.
    terminal_ansi_colors = [
        # Dark
        bg,           # black
        ["#cf3f61"],  # red
        ["#7bb75b"],  # green
        ["#e9b32a"],  # yellow
        ["#3465a4"],  # blue
        ["#a57fc4"],  # magenta
        ["#389aad"],  # cyan
        ["#fafaf6"],  # white

        # Bright
        ["#555753"],  # black
        ["#ef2929"],  # red
        ["#8ae234"],  # green
        ["#fce94f"],  # yello
        ["#729fcf"],  # blue
        ["#ad7fa8"],  # magenta
        ["#34e2e2"],  # cyan
        fg            # white
    ]

    # Step 4: generation
    #
    # From a separate shell:
    #
    #     $ erb -T - bar.erb > bar.vim
    #
    # From Vim:
    #
    #     :!erb -T - % > %<.vim

    # Many thanks to Barry Arthur (https://github.com/dahu) for the original idea.
-%>
" Name:        <%= information[:name] %>.vim
" Author:      <%= information[:author] %> <<%= information[:email] %>>
" Webpage:     <%= information[:webpage] %>
" Description: <%= information[:description] %>
" Licence:     <%= information[:licence] %>

hi clear

if exists("syntax_on")
  syntax reset
endif

let colors_name = "<%= information[:name].downcase %>"

if ($TERM =~ '256' || &t_Co >= 256) || has("gui_running")
<% for highlight in highlights -%>
<% if highlight.length == 4 -%>
    hi <%= highlight[0] %> ctermbg=<%= highlight[1].kind_of?(String) ? highlight[1] : highlight[1][1] %> ctermfg=<%= highlight[2].kind_of?(String) ? highlight[2] : highlight[2][1] %> cterm=<%= highlight[3] %> guibg=<%= highlight[1].kind_of?(String) ? highlight[1] : highlight[1][0] %> guifg=<%= highlight[2].kind_of?(String) ? highlight[2] : highlight[2][0] %> gui=<%= highlight[3] %>
<% if highlight[0] == "Normal" -%>
<%= '' %>
    set background=<%= information[:background] %>
<%= '' %>
<% end -%>
<% elsif highlight.length > 4 -%>
    hi <%= highlight[0] %> ctermbg=<%= highlight[1].kind_of?(String) ? highlight[1] : highlight[1][1] %> ctermfg=<%= highlight[2].kind_of?(String) ? highlight[2] : highlight[2][1] %> cterm=<%= highlight[3] %> guibg=<%= highlight[1].kind_of?(String) ? highlight[1] : highlight[1][0] %> guifg=<%= highlight[2].kind_of?(String) ? highlight[2] : highlight[2][0] %> gui=<%= highlight[3] %> guisp=<%= highlight[4].kind_of?(String) ? highlight[4] : highlight[4][0] %>
<% end -%>
<% end -%>

elseif &t_Co == 8 || $TERM !~# '^linux' || &t_Co == 16
    set t_Co=16
<%= '' %>
<% for highlight in highlights -%>
<% if highlight.length > 2 -%>
    hi <%= highlight[0] %> ctermbg=<%= highlight[1].kind_of?(String) ? highlight[1] : highlight[1][2] %> ctermfg=<%= highlight[2].kind_of?(String) ? highlight[2] : highlight[2][2] %> cterm=<%= highlight[3] %>
<% if highlight[0] == "Normal" -%>
<%= '' %>
    set background=<%= information[:background] %>
<%= '' %>
<% end -%>
<% end -%>
<% end -%>
endif
<% links = highlights.select do |highlight| -%>
<% highlight.length == 2 -%>
<% end -%>
<% if links.length > 0 -%>
<%= '' %>
<% for link in links -%>
hi! link <%= link[0] %> <%= link[1] %>
<% end -%>
<% end -%>
<% if terminal_ansi_colors.length == 16 -%>
<%= '' %>
let g:terminal_ansi_colors = [
<% for color in terminal_ansi_colors -%>
        \ '<%= color[0] %>',
<% end -%>
        \ ]
<% end -%>

" Generated with RNB (https://gist.github.com/romainl/5cd2f4ec222805f49eca)
